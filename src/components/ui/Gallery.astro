---
// Gallery.astro
import ParsedImage from "./ParsedImage.astro";
import { JSDOM } from "jsdom";

interface Props {
  content: string;
}

const { content } = Astro.props;

function parseGalleryContent(content: string) {
  const dom = new JSDOM(content);
  const doc = dom.window.document;
  return Array.from(doc.querySelectorAll("img")).map((img) => img.outerHTML);
}

const galleryImages = parseGalleryContent(content);
---

<div class="gallery">
  {galleryImages.map((imageHtml) => <ParsedImage content={imageHtml} />)}
</div>

<style>
  .gallery {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
  }
</style>
