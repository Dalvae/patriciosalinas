---
import Layout from "../layouts/Layout.astro";
import { getHomePageContent } from "../lib/graphql-queries";
import type { Page, Lang } from "../types/types";
import { useTranslations } from "../i18n/utils";

interface Props {
  lang: Lang;
  uri?: string;
  page: Page;
}

const { lang, uri, page } = Astro.props;
const t = useTranslations(lang);

let homeContent = null;
if (uri === undefined || uri === "") {
  try {
    homeContent = await getHomePageContent(lang);
  } catch (error) {
    console.error("Error fetching home page content:", error);
  }
}

const title = homeContent ? homeContent.title : page.title;
const content = homeContent ? homeContent.content : page.content;
---

<Layout title={title}>
  <h1>{title}</h1>
  <div set:html={content} />
</Layout>
